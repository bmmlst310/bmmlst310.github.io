!function(){var __webpack_modules__={"./group-topic/src/page/join_btn.js":function(__unused_webpack_module,__unused_webpack_exports,__webpack_require__){var $=__webpack_require__("jquery");$("#joingroupbtn").click(function(e){var url="/j/group/"+$(this).attr("name")+"/join";if(window._USER_ABNORMAL){e.preventDefault(),window.show_abnormal&&window.show_abnormal();return}return $.post_withck(url,{},function(sjson){var ret=eval("("+sjson+")");$("#joingroupbtn").hide(),"toomany"==ret.result||"need_extra"==ret.result?$("#replysect").html('<p class="attn" align="right">你已经加入了${get_user_group_count(request.user.id)) if request.user else MAX_USER_JOINED_GROUPS}个小组，无法再加入更多小组。</p>'):$("#replysect").html('<br/><h2>你现在加入了这个小组，可以发表回应　· · · · · ·　</h2><div class="txd"><form name="comment_form" method="post" action="add_comment"><textarea name="rv_comment" rows="8" cols="54"></textarea><br/><input type="hidden" name="start" value="${start}"/><span class="bn-flat-hot rr"><input type="submit" value="加上去"/></span>'+window.group.rec_bt+"</form></div>")}),!1})},"./group-topic/src/page/manage_opts.js":function(t,e,n){var i=n("jquery");i("body").delegate(".dlg-stats .explain","click",function(){dui.Dialog({width:420,title:"成员记录说明",buttons:["confirm"],content:'<div class="stats-explain"><h5>组内活跃</h5><p>・活跃情况每24小时更新</p><h5>组内违规</h5><p>・已被删除的讨论，不记入活跃情况</p><p>・删除理由是“楼主申请删除”的讨论，不记入违规记录</p><p>・活跃情况每24小时更新</p><h5>社区违规</h5><p>6个月内，若用户由于以下原因被小组组长或管理员移出并永久拒绝加入，且被社区管理员核实违确有违规行为，将计入他的社区违规记录，向其他小组组长/管理员公开：</p><br /><h6>发布社区禁止的内容</h6><p>・广告垃圾</p><p>・色情低俗</p><p>・未经授权</p><p>・违法违规</p><br /><h6>不友善</h6><p>・不雅词句、辱骂或人身攻击</p><p>・引战、挂人、泄露他人隐私</p><br /><p>若用户多次由于以下原因被移出并永久拒绝加入，也将计入他的社区违规记录：</p><br /><h6>违反小组组规</h6><p>・违反本组发言规则</p><p>・发布与本组主题无关的内容</p></div>'}).open()}),i("body").delegate("textarea, input[name=submit_btn]","click",function(t){window._USER_ABNORMAL&&(t.preventDefault(),show_abnormal&&show_abnormal())}),i("body").delegate(".topic-doc .active-member-icon, .reply-doc .active-member-icon","click",function(){generate_group_prompt_dialog({title:'活跃成员<span class="active-member-icon"></span>',content:"什么是活跃成员？<br/>活跃成员根据成员的组内发帖数、回复数、精华帖数、访问频次等数据综合计算产生。活跃成员的发言将展示活跃成员标识，该标识仅本组组长/管理员可见。<br/><br/>识别活跃成员有什么用？<br/>组长/管理员在日常浏览小组时，可通过活跃成员标识快速识别、熟悉组内的活跃成员，积极与之互动、建立感情，维护小组核心成员。",buttons:["confirm"]})})},"./group-topic/src/page/pos_fixed.js":function(t,e,n){var i=n("jquery");function o(t,e){if(t&&0!=t.length){var n,o=e&&e.gap||10,a=e&&e.fixedBound||"top",r=i(window),s=i.map(t,function(t){var t=i(t),e=t.offset(),n=e.top;return{node:t,top:n,left:e.left,width:t.width(),bottom:n+t.outerHeight(!0)}}).sort(function(t,e){return t.top-e.top});return{init:function(){(this.container=i('<div class="fixed-fields"></div>')).hide().appendTo(t.eq(0).parent().css("position","relative")),this.bindResizeEvent(),this.bindScrollEvent(),this.setupChecker(),this.cache={bodyWidth:i("body").width()},r.trigger("resize")},bindScrollEvent:function(){var t=this;r.bind("scroll",function(){var e;return function(n){e&&clearTimeout(e),e=setTimeout(function(){t.handleScroll.call(t,n)},0)}}())},bindResizeEvent:function(){var t=this;r.bind("resize",function(){var e;return function(n){e&&clearTimeout(e),e=setTimeout(function(){t.handleResize.call(t,n)},20)}}())},setupChecker:function(){var e=this;e.getChecker()(t,function(){r.trigger("resize")})},getChecker:function(){var t=window.MutationObserver||window.WebKitMutationObserver;if(t)return function(e,n){i.each(e,function(e,i){new t(function(t,e){(t[0].addedNodes.length||t[0].removedNodes.length)&&n()}).observe(i,{childList:!0,subtree:!0})})};var e=document.documentElement,n=!!e.addEventListener&&function(){var t,i,o=!1;return i=e.id,t=function(){e.removeEventListener("DOMAttrModified",t,!1),n=!0,e.id=i},e.addEventListener("DOMAttrModified",t,!1),e.id="nw",o="nw"!==e.id,e.id=i,o}();return n?function(t,e){function n(t){(i.contains(t.currentTarget,t.relatedNode)||t.currentTarget===t.relatedNode)&&e()}i.each(t,function(t,e){e.addEventListener("DOMNodeInserted",n,!1),e.addEventListener("DOMNodeRemoved",n,!1)})}:this.checkingTimer()},checkingTimer:function(){var t=this,e=[];return clearInterval(t.timer),t.timer=setInterval(function(){for(var t,n=!1,o=0,a=s.length;o<a;o++)if((t=s[o]).node.outerHeight(!0)!==t.bottom-t.top){n=!0;break}n&&i.each(e,function(t,e){e()})},100),function(t,n){e.push(n)}},handleScroll:function(){var t=r.scrollTop(),e=s[s.length-1].bottom+o;!n&&t>=e?this.setFixed():n&&t<=e&&this.setStatic()},setFixed:function(){var t=this,e=o;i.each(s,function(n){var o=s[n],r=o.node,l=i(r).offset().left;i(r).width();var p=i("body").width();l+=(p-t.cache.bodyWidth)/2,"top"===a?r.css({position:"fixed",top:e,bottom:"auto",left:l,width:o.width}):"bottom"===a&&r.css({position:"fixed",top:"auto",bottom:e,left:l,width:o.width}),e+=r.height(),o.left=l,t.cache.bodyWidth=p}),n=!0},setStatic:function(){i.each(s,function(t){var e=s[t],n=e.node;e.top,n.css({position:"static"})}),n=!1},handleResize:function(){n=!1,this.handleScroll()}}}}window.fixed=o},"./group-topic/src/page/topic.js":function(t,e,n){var i=n("jquery");i(".topic-content .image-container.origin").each(function(t,e){var n='<p class="origin" style="width: '+i(e).find("img").width()+'px">© 版权所有</p>';i(e).find(".image-wrapper").append(n)})},jquery:function(t){"use strict";t.exports=jQuery}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};!function(){"use strict";function t(t){var e=navigator.userAgent||"";return t.test(e)}function e(e){return function(){return t(e)}}e(/weibo/i),e(/xiaomi/i),e(/baiduboxapp|baidubrowser/i),e(/iphone|ipad|ipod/i);var n,i=e(/android/i),o=e(/(iphone|ipod|((?:android)?.*?mobile)|blackberrynokia)/i),a=e(/com\.douban\.frodo/i);function r(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0}e(/miniprogram/i),e(/(com\.douban\.frodo\/[\d.]+(dev|debug|test|beta|alpha))|(com\.douban\.frodo\.test)/i);var s="image-gif-button-play",l="image-gif-loading",p="image-gif-button-reload";!function(t){t.default="default",t.loading="loading",t.triggered="triggered",t.playing="playing",t.pause="pause",t.error="error",t.timeout="timeout"}(n||(n={}));var c={download:!0,prefetch:!0,clickPlay:!1,timeout:1e4},u=function(){function t(t,e){var i=this;if(!t)return null;this.inited||t.getAttribute("data-inited")||(this.config=Object.assign({},c,e),this.elem=t,this.container=t.parentElement,this.previewURL=this.elem.src,this.playURL=this.getPlayURL(),this.config.clickPlay&&this.elem&&(this.elemClick=r(this.elem,"click",function(t){var e=i.status===n.playing,o=i.status===n.default,a=i.status===n.pause,r=i.status===n.error,s=i.status===n.loading;(o||a)&&t.stopPropagation(),e||r||s||i.playHandle(t,!0)})),this.init())}return t.prototype.init=function(){},t.prototype.getOriginURL=function(t){return(t||this.elem).getAttribute("data-original-url")},t.prototype.getPlayURL=function(t){return this.getOriginURL()},t.prototype.createDownloadButton=function(t){if(this.config.download){var e=document.createElement("a");e.className="image-gif-download",e.href=t||this.getOriginURL(),e.target="_blank",e.rel="norefer",e.innerHTML="GIF",this.container&&this.container.appendChild(e),this.downloadButton=e}},t.prototype.createPanel=function(){this.panel||(this.panel=document.createElement("div"),this.panel.className="image-gif-panel",this.panel.innerHTML='\n      <div class="image-gif-panel-inner">\n        <a href="javascript:;" class="'+s+'">GIF</a>\n        <a href="javascript:;" class="'+p+'" style="display: none">重新加载</a>\n        <span class="'+l+'" style="display: none;">加载中</span>\n      </div>\n    ',this.container.appendChild(this.panel),this.playButton=this.panel.getElementsByClassName(s)[0],this.reloadButton=this.panel.getElementsByClassName(p)[0],this.loadingIcon=this.panel.getElementsByClassName(l)[0],this.playButtonClick=r(this.playButton,"click",this.playHandle.bind(this)),this.reloadButtonClick=r(this.reloadButton,"click",this.reloadHandle.bind(this)),this.elem.setAttribute("data-inited","true"))},t.prototype.play=function(t){},t.prototype.playHandle=function(t,e){this.play(this.playURL),this.changeStatus(n.playing)},t.prototype.changeStatus=function(t){this.status=t,this.elem&&this.elem.setAttribute("data-status",t)},t.prototype.reloadHandle=function(t){this.changeStatus(n.loading),this.playButton.style.display="none",this.reloadButton.style.display="none",this.loadingIcon.style.display="block";var e="_r="+Math.random(),i=this.playURL.indexOf("?")>=0?this.playURL+"&"+e:this.playURL+"?"+e;this.playURL=i,this.play(this.playURL)},t.prototype.notFoundHandle=function(t){},t.prototype.pause=function(){},t.prototype.destroy=function(){},t.prototype.startTimeout=function(){var t=this,e=this.config.timeout,i=void 0===e?1e4:e;this.timer=setTimeout(function(){t.status===n.loading&&t.changeStatus(n.timeout)},i)},t.prototype.clearTimeout=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype._destory=function(){this.container&&(this.panel&&(this.container.removeChild(this.panel),this.panel=null),this.downloadButton&&(this.container.removeChild(this.downloadButton),this.downloadButton=null)),this.elem&&this.elem.setAttribute("data-inited",""),this.inited=!1,this.changeStatus(n.default)},t.prefetch=function(t){if(!t)return!1;var e=document.createElement("link");e.rel="prefecth",e.href=t;var n=document.getElementsByTagName("link")[0];n?n.parentNode.insertBefore(e,n):document.getElementsByTagName("head")[0].appendChild(e)},t}();function d(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}var h=function(){var t=function(e,n){return(t=Object.setPrototypeOf||d({__proto__:[]},Array)&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e.prototype.init=function(){this.createPanel(),this.playURL=this.getPlayURL(),this.imgLoad=r(this.elem,"load",this.loadedHandle.bind(this)),this.imgLoadErorr=r(this.elem,"error",this.notFoundHandle.bind(this)),this.config&&this.config.prefetch&&u.prefetch(this.getPlayURL()),this.elem&&(this.srcTemp=this.elem.getAttribute("src"))},e.prototype.loadedHandle=function(){if(!this.elem)return!1;this.elem.src===this.playURL&&(this.playButtonClick.remove(),this.reloadButtonClick.remove(),this.imgLoad.remove(),this.imgLoadErorr.remove(),this.container.removeChild(this.panel),this.createDownloadButton(),this.changeStatus(n.playing))},e.prototype.notFoundHandle=function(){if(!this.elem)return!1;this.elem.src=this.previewURL,this.playButton.style.display="none",this.reloadButton.style.display="block",this.loadingIcon.style.display="none",this.changeStatus(n.error)},e.prototype.play=function(t){if(!this.elem)return!1;this.elem.src=t||this.playURL,this.playButton.style.display="none",this.reloadButton.style.display="none",this.loadingIcon.style.display="block"},e.prototype.pause=function(){this.elem&&this.srcTemp&&this.elem.setAttribute("src",this.srcTemp),this.changeStatus(n.pause)},e.prototype.destroy=function(){this.pause(),this._destory()},e}(u);function f(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}var m=function(){var t=function(e,n){return(t=Object.setPrototypeOf||f({__proto__:[]},Array)&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),g=i(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return m(e,t),e.prototype.init=function(){var t=this;this.imageLoaded=!1,this.needPlay=!1,this.createPanel(),this.container.setAttribute("data-render-type","video"),this.elem&&(this.elem.complete?this._playAfterComplete():this.elem.addEventListener("load",function(){t._playAfterComplete()})),e.allInstances.push(this),this.startTimeout()},e.prototype._playAfterComplete=function(){this.imageLoaded=!0,this.needPlay&&(this.createPlayer(),this.bindPlayerEvents(),this.play())},e.prototype.playingHandle=function(){this.status!==n.playing&&(this.changeStatus(n.playing),this.playButton&&(this.playButton.style.display="none"),this.reloadButton&&(this.reloadButton.style.display="none"),this.loadingIcon&&(this.loadingIcon.style.display="none"),this.player&&(this.player.style.display="block"),this.playButtonClick.remove(),this.reloadButtonClick.remove(),this.container.removeChild(this.panel),this.panel=null,this.playerLoadStart.remove(),this.playerPlaying.remove(),this.playerReady.remove(),this.playerLoadedData.remove(),this.playerLoadedMetaData.remove(),this.changeStatus(n.playing),this.createDownloadButton(),this.clearTimeout())},e.prototype.changeStatus=function(t){this.status=t,this.elem&&this.elem.setAttribute("data-status",t),this.player&&this.player.setAttribute("data-status",t)},e.prototype.getPlayURL=function(t){var e=(t||this.elem).getAttribute("data-original-url");if(!e)return"";var n=e.split(".").pop();return e.replace(RegExp("."+n+"$","gi"),".mp4")},e.prototype.createPlayer=function(){if(!this.imageLoaded)return!1;var t=document.createElement("video");this.container.appendChild(t),t.className="image-gif-player",t.muted=!0,t.controls=!1,t.loop=!g,t.preload="auto",t.autoplay=!0,t.poster=this.previewURL,t.crossOrigin="anonymous",t.playsinline=!0,t.style.display="none",t.setAttribute("playsinline","true"),t.setAttribute("webkit-playsinline","true"),t.setAttribute("type","video/mp4");try{var e=this.playURL;t.src=e}catch(e){console&&console.error("不支持该 player.src",t.src)}this.loadingIcon.style.display="block",this.playButton.style.display="none",this.player=t},e.prototype.bindPlayerEvents=function(){var t=this;this.playerLoadStart=r(this.player,"loadstart",function(e){t.changeStatus(n.loading)}),this.playerReady=r(this.player,"canplay",function(){t.canPlay=!0,t.status!==n.playing&&t.play()}),this.playerLoadedMetaData=r(this.player,"loadedmetadata",function(){t.canPlay=!0,t.status!==n.playing&&t.play()}),this.playerLoadedData=r(this.player,"loadeddata",function(){t.canPlay=!0}),g&&(this.playerTrickLoop=r(this.player,"ended",function(){t.player.currentTime=.01,t.player.play()})),this.playerPlaying=r(this.player,"playing",this.playingHandle.bind(this)),this.playerLoadError=r(this.player,"error",this.notFoundHandle.bind(this))},e.prototype.playHandle=function(t,e){t&&t.preventDefault(),t&&e&&t.stopPropagation(),this.canPlay=!0,this.play(this.playURL),this.changeStatus(n.loading)},e.prototype.play=function(t){return this.needPlay=!0,!!this.imageLoaded&&(this.player||(this.createPlayer(),this.bindPlayerEvents()),!!this.canPlay&&void(t&&this.player&&(this.player.src=t),this.player&&(this.player.play(),this.changeStatus(n.triggered))))},e.prototype.reloadHandle=function(t){t&&t.preventDefault(),t&&t.stopPropagation(),this.changeStatus(n.loading),this.playButton&&(this.playButton.style.display="none"),this.reloadButton&&(this.reloadButton.style.display="none"),this.loadingIcon&&(this.loadingIcon.style.display="block");var e=this.playURL;this.canPlay=!0,this.play(e)},e.prototype.notFoundHandle=function(t){if(this.status===n.playing)return!1;this.canPlay=!1,this.playButton&&(this.playButton.style.display="none"),this.reloadButton&&(this.reloadButton.style.display="block"),this.loadingIcon&&(this.loadingIcon.style.display="none"),this.player&&(this.player.style.display="none"),this.changeStatus(n.error)},e.prototype.pause=function(){this.player&&(this.player.pause(),this.changeStatus(n.pause))},e.prototype.destroy=function(){this.container&&this.player&&(this.container.removeChild(this.player),this.player=null),this._destory()},e.allInstances=[],e.ALL_PLAY=function(){e.allInstances&&e.allInstances.forEach(function(t){"playing"!==t.status&&(t.canPlay=!0,t.play())})},e}(u),b=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var i=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],r=0,s=a.length;r<s;r++,o++)i[o]=a[r];return i};function w(){var t=document.createElement("video");return t.canPlayType&&t.canPlayType("video/mp4")&&(!o()||!!a()||"playsInline"in t)}var L=[],_=function(t,e){void 0===e&&(e=document.body);var n=[];if(!e)return null;var i=e.querySelectorAll("img[data-render-type=gif]");if(i&&0!==i.length){for(var o,a=0,r=t&&"video"===t.type&&w(),s={download:!t||t.download,clickPlay:!!t&&t.clickPlay};o=i[a];){var l=r?new v(o,s):new y(o,s);n.push(l),a++}if("object"==typeof t&&"preloadNum"in t)for(var p=Math.min(t.preloadNum,n.length);p--;)n[p]&&n[p].play();return L=b(L,n),n}};__webpack_require__("jquery")(function(){function t(t){t.setAttribute("style","");var e=t.querySelector(".reply-quote-content"),n=t.querySelector(".quote-hidden"),i=n&&n.querySelector(".pubdate"),o=t.querySelector(".open-quote"),a=t.querySelector(".quote-folded-reason");e&&e.setAttribute("style",""),a&&a.setAttribute("style",""),n&&n.setAttribute("style","display: none;"),i&&i.setAttribute("style","display: none;"),o&&o.setAttribute("style","display: none;")}document.body.addEventListener("click",function(e){var n=e.target;if("open-reply"===n.className){var i=n.parentNode.parentNode,o=i.querySelector(".reply-content"),a=i.querySelector(".reply-quote"),r=i.querySelector(".operation-div"),s=i.querySelector(".comment-photos"),l=i.querySelector(".reply-folded-reason");o&&o.setAttribute("style",""),r&&r.setAttribute("style",""),s&&s.setAttribute("style",""),l&&l.setAttribute("style",""),a&&t(a),n.parentNode.setAttribute("style","display: none;")}"open-quote"===n.className&&t(n.parentNode.parentNode)}),_({type:"video",download:!0,preloadNum:0},document.getElementById("comments")),_({type:"video",download:!0,preloadNum:0},document.getElementById("popular-comments"))}),__webpack_require__("./group-topic/src/page/join_btn.js"),__webpack_require__("./group-topic/src/page/manage_opts.js"),__webpack_require__("./group-topic/src/page/pos_fixed.js"),__webpack_require__("./group-topic/src/page/topic.js")}()}();