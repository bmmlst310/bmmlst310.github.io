!function(){"use strict";var t,n={jquery:function(t){t.exports=jQuery}},e={};(t=function t(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return n[o](i,i.exports,t),i.exports}("jquery"))(function(){t(".lock-dialog-confirm").click(function(){var n=t(".lock-dialog-confirm").attr("title");if(window._USER_ABNORMAL){window.show_abnormal&&window.show_abnormal();return}return generate_group_prompt_dialog({content:"真的要"+n+"？<br/><br/>"+_topicOptConfig.punish_pop_tip,prompt:"",callback:function(){var n=t(".lock-dialog-confirm").attr("href");window.location=n}}),!1}),t(".fold-dialog-confirm").click(function(){if(window._USER_ABNORMAL){window.show_abnormal&&window.show_abnormal();return}var n=t(this).attr("title"),e=t(this).attr("href");return generate_group_prompt_dialog({content:'<div class="fold-dialog-content">确认'+n+'？<br> 折叠后该内容将从小组讨论列表中隐藏，仅内容发布者可见。<br> <span class="fold-dialog-intro">查看折叠的使用说明</span></div>',prompt:"",callback:function(){window.location=e}}),!1}),t(document).delegate(".fold-dialog-intro","click",function(){generate_group_prompt_dialog({content:['<div class="fold-dialog-detail">',"<h2>什么是折叠？</h2>","<p>折叠是提供给小组组长/管理员的内容管理工具，对于存在争议、低质/水化的内容，组长/管理员可将其折叠，有效维护小组高质、友善的讨论氛围。<br/>折叠后的内容，如组长/管理员判断已不再需要折叠，可将其恢复。</p>","<h2>一个讨论被折叠后会发生什么？</h2>","<p>该内容不会被删除，只是不再展示在小组讨论列表中，且无法被顶起。折叠操作不会通知内容发布者。</p>","<p>请注意，如组长/管理员滥用该功能，无故限制组员的正常发言，一经发现，小组将被禁用折叠功能。</p>",'<img src="'+_topicOptConfig.fold_eg+'"/>',"</div>"].join(""),buttons:["confirm"],callback:function(){dui.Dialog().close()}})}),t(".memberstats-dialog-confirm").click(function(){var n=t(this);t(this).attr("title");var e=n.data("uid"),o=n.data("uname"),a=n.data("gid");dui.Dialog({width:"auto",cls:"dlg-stats",content:"加载中...",buttons:["confirm"]}).open(),t.get("/j/group/"+a+"/member_stats",{user_id:e,need_topic_count:1,full:1},function(t){var n=o;_topicOptConfig.active_members.indexOf(String(e))>-1&&(n+='<span class="active-member-icon"></span>');var a=['发布讨论 <span style="color: #00A52A;">'+t.topic_count+"</span>",'发布回复 <span style="color: #00A52A;">'+t.comments_count+"</span>",t.elite_count?'精华讨论 <span style="color: #D57B0F;">'+t.elite_count+"</span>":""].map(function(t){return"<p>"+t+"</p>"}).join(""),i=[t.deleted_count>0?'讨论被删除 <span class="t-rd">'+t.deleted_count+"</span>":null,t.locked_count>0?'讨论被禁回 <span class="t-rd">'+t.locked_count+"</span>":null].filter(Boolean).map(function(t){return"<p>"+t+"</p>"}).join(""),l=t.banned_record.reduce(function(t,n){return t+n.count},0),c=["<p>近半年被<span> "+l+"个小组 </span>移出并永久拒绝加入</p>"].concat(t.banned_reason_list.map(function(t){return"<p>"+t[0]+"<span> "+t[1]+"</span></p>"})).filter(Boolean).join("");0===l&&(c=null);var d=(t.join_date?"<span>"+t.join_date.split(" ")[0]+" 加入本组</span>":"")+(t.is_joined_by_quiz?"<span>答题入组</span>":"")+(t.join_date?"":"<span>组外用户</span>");dui.Dialog({title:n,content:['<div class="base-info">'+d+"</div>",'<div class="stats-box"><p>组内活跃</p><div class="cnt">'+a+"</div></div>",'<div class="stats-box"><p>组内违规</p><div class="cnt">'+(i||"无")+"</div></div>",'<div class="stats-box"><p>社区违规</p><div class="cnt">'+(c||"无")+"</div></div>",'<p class="explain">成员记录说明</p>'].join(""),buttons:["confirm"]}).update()})}),t(".ban-dialog-ad").click(function(){var n=dui.Dialog({cls:"group-promote-dialog",title:"操作提示",content:"该账号为豆瓣商务官方广告投放账号，不支持封禁操作，如有问题请联系小组组长或 business@douban.com",width:400,buttons:[{text:"确定",method:function(){}}]});return n.open(),n.node.find(".ft").html((t(".dui-dialog").undelegate(".btn-ok","click").delegate(".btn-ok","click",function(){t(".dui-dialog").hide()}),'<div><span class="bn-flat btn-ok">确定</span></div>')),!1}),t(".remove-dialog-ad").click(function(){var n=dui.Dialog({cls:"group-promote-dialog",title:"操作提示",content:"真的要删除小组讨论 "+_topicOptConfig.topic.title.replace("\n"," ")+"?",width:400,buttons:[{text:"确定",method:function(){}}]});return n.open(),n.node.find(".ft").html((t(".dui-dialog").undelegate(".btn-ok","click").delegate(".btn-ok","click",function(){var n=t(".remove-dialog-ad").attr("href");window.location=n}),t(".dui-dialog").delegate(".btn-cancel","click",function(){t(".dui-dialog").hide()}),'<div><span class="bn-flat btn-cancel">取消</span><span class="bn-flat btn-ok">确定</span></div>')),!1}),t(".unset-flash-event").click(function(n){n.preventDefault();var e=dui.Dialog({cls:"unset-flash-event-dialog",title:"确定提前结束快闪楼吗",content:"结束后，无法再恢复",width:400,buttons:[{text:"确定",method:function(){t.get(_topicOptConfig.topic.path+"unset_topic_event",function(t){location.reload()})}},{text:"取消",method:function(){e.close()}}]});e.open()}),t(".set-flash-event").click(function(n){n.preventDefault();var e,o,a=t(this).attr("data-date"),i=t(this).attr("data-topic_id"),l=dui.Dialog({cls:"set-flash-event-dialog group-promote-dialog",title:"设置为快闪楼",content:["<p>快闪楼活动开始时间是讨论帖子的发布时间："+a+"</p>","<dl>","<dt>活动持续时间</dt>",'<dd><label><input type="radio" name="event_days" value="3" checked />3天</label></dd>','<dd><label><input type="radio" name="event_days" value="7" />7天</label></dd>','<dd><label><input type="radio" name="event_days" value="10" />10天</label></dd>','<dd><label><input type="radio" name="event_days" value="14" />14天</label></dd>'].concat(_topicOptConfig.global_event_type,["</dl>"]).join(""),width:400,buttons:[{text:"确定",method:function(){}}]});t(".dui-dialog").delegate('input[name="event_days"], input[name="event_type"]',"change",function(n){var e=t('.dui-dialog input[name="event_days"]:checked').val(),o=t('.dui-dialog input[name="event_type"]:checked').val();t(".dui-dialog .dui-dialog-content .ft .btn-ok").attr("href","/group/topic/".concat(i,"/set_topic_event?event_days=").concat(e,"&event_type=").concat(o))}),l.open(),l.node.find(".ft").html((e=t('.dui-dialog input[name="event_days"]:checked').val(),o=t('.dui-dialog input[name="event_type"]:checked').val(),t(".dui-dialog").delegate(".btn-cancel","click",function(){t(".dui-dialog").hide()}),'\n        <a class="bn-flat btn-ok"\n          href="/group/topic/'.concat(i,"/set_topic_event?event_days=").concat(e,"&event_type=").concat(o,'"\n        >确定</a>\n        <span class="bn-flat btn-cancel">取消</span>\n      ')))})})}();